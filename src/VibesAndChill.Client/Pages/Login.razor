@page "/login"
@inject NavigationManager Navigation
@inject HttpClient Http
@using VibesAndChill.Shared.Models

<MudPaper Class="pa-4 mx-auto" MaxWidth="400px">
    <MudText Typo="Typo.h5">Login</MudText>
    <MudTextField @bind-Value="loginModel.Username" Label="Username" Required="true" />
    <MudTextField @bind-Value="loginModel.Password" Label="Password" InputType="InputType.Password" Required="true" />
    <MudButton OnClick="LoginUser" Color="Color.Primary">Login</MudButton>
    <MudButton OnClick="LoginWithGoogle" Color="Color.Secondary">Login with Google</MudButton>
    <MudText Class="mt-2">Don't have an account? <MudLink Href="/register">Register</MudLink></MudText>
</MudPaper>

@code {
    RegisterDto loginModel = new();
    async Task LoginUser()
    {
        var response = await Http.PostAsJsonAsync("api/auth/login", loginModel);
        if (response.IsSuccessStatusCode)
        {
            // handle token, redirect, etc.
        }
    }
    void LoginWithGoogle()
    {
        Navigation.NavigateTo("/signin-google", true);
    }
}
