@page "/register"
@inject HttpClient Http
@using VibesAndChill.Shared.Models

<MudPaper Class="pa-4 mx-auto" MaxWidth="400px">
    <MudText Typo="Typo.h5">Register</MudText>
    <MudTextField @bind-Value="registerModel.Username" Label="Username" Required="true" />
    <MudTextField @bind-Value="registerModel.Password" Label="Password" InputType="InputType.Password" Required="true" />
    <MudTextField @bind-Value="registerModel.FirstName" Label="First Name" />
    <MudTextField @bind-Value="registerModel.LastName" Label="Last Name" />
    <MudTextField @bind-Value="registerModel.Gender" Label="Gender" />
    <MudTextField @bind-Value="registerModel.PreferredGender" Label="Preferred Gender" />
    <MudTextField @bind-Value="registerModel.Location" Label="Location" />
    <MudTextField @bind-Value="registerModel.Bio" Label="Bio" />
    <MudButton OnClick="RegisterUser" Color="Color.Primary">Register</MudButton>
    <MudText Class="mt-2">Already have an account? <MudLink Href="/login">Login</MudLink></MudText>
</MudPaper>

@code {
    RegisterDto registerModel = new();
    async Task RegisterUser()
    {
        var response = await Http.PostAsJsonAsync("api/auth/register", registerModel);
        if (response.IsSuccessStatusCode)
        {
            // handle token, redirect, etc.
        }
    }
}
