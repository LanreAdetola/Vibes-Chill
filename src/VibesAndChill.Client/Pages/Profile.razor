@page "/profile"
@inject HttpClient Http
@using VibesAndChill.Shared.Models

<MudPaper Class="pa-4 mx-auto" MaxWidth="400px">
    <MudText Typo="Typo.h5">My Profile</MudText>
    <MudTextField @bind-Value="user.FirstName" Label="First Name" />
    <MudTextField @bind-Value="user.LastName" Label="Last Name" />
    <MudTextField @bind-Value="user.Bio" Label="Bio" />
    <MudTextField @bind-Value="user.Gender" Label="Gender" />
    <MudTextField @bind-Value="user.PreferredGender" Label="Preferred Gender" />
    <MudTextField @bind-Value="user.Location" Label="Location" />
    <MudTextField @bind-Value="user.ProfilePhotoUrl" Label="Profile Photo URL" />
    <MudButton OnClick="UpdateProfile" Color="Color.Primary">Save</MudButton>
</MudPaper>

@code {
    AppUser user = new();
    protected override async Task OnInitializedAsync()
    {
        user = await Http.GetFromJsonAsync<AppUser>("api/users/me");
    }
    async Task UpdateProfile()
    {
        await Http.PutAsJsonAsync("api/users/me", user);
    }
}
